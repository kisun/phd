% Here is a suggested template for PhD research proposal for the
% first annual report.
% Written originally 2010-06-22 by T. W. Yee.
% Last modified      2010-07-22 by T. W. Yee.


\documentclass[12pt,a4paper]{article}


 \usepackage{natbib}    % For BibTeX
 \usepackage{graphicx}  % To import .pdf files
 \usepackage{booktabs}
 \usepackage{comment}
%\usepackage{times}
 \usepackage{setspace}
% \onehalfspacing
 \doublespacing

 \oddsidemargin  -10mm
 \evensidemargin -10mm
 \headheight 0mm
 \headsep -3mm
\textheight 250mm
\textwidth 180mm
\topmargin -4mm
\topskip -10mm

%\textwidth=450pt
%\hoffset=-2cm

\usepackage{amsmath}
\usepackage{amsfonts}
\newcommand{\bu}{\boldsymbol{u}}
\newcommand{\bx}{\boldsymbol{x}}
\newcommand{\by}{\boldsymbol{y}}
\newcommand{\bz}{\boldsymbol{z}}
\newcommand{\bY}{\mathbf{Y}}
\newcommand{\bX}{\mathbf{X}}
\newcommand{\bZ}{\mathbf{Z}}
\newcommand{\btheta}{\boldsymbol{\theta}}
\newcommand{\mat}[1]{\mathbf{#1}}

\usepackage[acronym]{glossaries}
\newacronym[shortplural={ATIS}]{atis}{ATIS}{advanced traveller information system}
\newacronym{avl}{AVL}{automatic vehicle location}
\newacronym{rti}{RTI}{real-time information}
\newacronym{gps}{GPS}{Global Positioning System}
\newacronym{api}{API}{application programming interface}
\newacronym{gtfs}{GTFS}{general transit feed specification}
\newacronym{knn}{KNN}{$k$-nearest neighbour}
\newacronym{ann}{ANN}{artificial neural networks}
\newacronym{svm}{SVM}{support vector machines}
\newacronym{kf}{KF}{Kalman filter}
\newacronym{pf}{PF}{particle filter}
\newacronym{mcmc}{MCMC}{Markov chain Monte Carlo}
\newacronym{eta}{ETA}{expected time of arrival}
\newacronym{at}{AT}{Auckland Transport}


\usepackage[hidelinks]{hyperref}
\usepackage{cleveref}


\begin{document}

\begin{Large}
\begin{center}
\textbf{Predicting Future Arrival Times of Buses} \\
\textbf{by Tom Elliott} \\
\textbf{for a PhD in Statistics}
\end{center}
\end{Large}


\hfill{Student ID: 1596870}

\hfill{Email: tom.elliott@auckland.ac.nz}

Supervisor: Professor~T.~Lumley

% Co-supervisor: Dr~B.~Brewer

% Advisory Committee: Drs~B.~Efron, D.~R.~Cox, K.~Pearson.\footnote{
% Specify the affiliation if outside the UoA Statistics
% Department.}



\begin{center}
\today
\end{center}


This document represents the student's research proposal after
one year of provisional PhD registration.
Confirmed PhD registration is now sought.




% ----------------------------------------------------------------------
\section{Introduction}
\label{sec:intro}



% This document is a template that can be edited by the student.
% Fill in the details as you go along and delete these instructions.
% Do have your research proposal scrutinized by your supervisor before
% submitting it to the department.



% Give a few paragraphs here on the general background
% to your research proposal; put the full details in
% Section~\ref{sec:background}. You might want to cite a few
% previous important results/papers. Describe any theory briefly
% here but put most of the details in Section~\ref{sec:background}.
% Describe any data in general with a few lines here but put the
% full details in Section~\ref{sec:data}.


% Motivate this section well \ldots why is the topic important?
% What use will the thesis have?
% What is unknown that will be known upon completion?


% This section should be understandable by an intelligent person
% who is not familiar with the technical details involved.
% The reader should be convinced that your work
% is worthwhile.





% Some of our PhD students have published in the primary literature
% directly using material from their thesis,
% e.g.,
% \cite{wors:1979},
% \cite{yee:wild:1996},
% \cite{wild:yee:1996},
% \cite{murr:1999},
% \cite{jian:scot:wild:2006},
% \cite{roev:meye:etal:2007},
% \cite{mill:stew:2007},
% or submitted such as
% \cite{lee:hiro:2008}.
% Ideally you should aim at least one of your publications towards
% a mainstream statistics journal, preferably your first one.
% All publications should be in a peer-reviewed international journal.
% It should be in the primary literature.
% Statistical theory and methodology is to be regarded as the highest
% form of quality output.
% Accompanying high quality software that can easily be used
% by others (such as a R package) is also good.
% It is best to submit to journals before the completion of a thesis
% because an acceptance validates the quality of that research.



% A word about writing up your thesis.
% In general, the Department of Statistics recommends \LaTeX{} rather than
% Microsoft Word.
% \LaTeX{} is easily run on the Department's Linux machines.
% A website that converts pdf into Word is \textsf{www.pdftoword.com}.
% The University of Auckland offers a half-day workshop
% on \LaTeX{} to postgraduate students.
% There is Sweave \citep{lmucs-papers:Leisch:2003b} which allows R
% \citep{R:Ihaka+Gentleman:1996} to be embedded into a \LaTeX{}
% document, and so the output does not have to be manually
% cut-and-pasted in. Sweave is useful for presentations too,
% in conjunction with Beamer.


% There is an editor called Emacs which is useful for all types of
% editing, including \LaTeX{}, C, and R.
% In Windows there is Tinn-R for R files and MiKTeX for \LaTeX{}.


% Note that {BibTeX} items are available from MathSciNet
% which is part of the ``Library Databases'' in the UoA electronic library
% system.
% There is a close relationship between EndNote and {BibTeX}.

\textbf{Background:}
Public transport is central to city planning and traffic management in large cities.
There are various forms, including trains, trams, ferries, and of particular interest to us, buses.
Over the years, the technologies involved in these systems has become ever more complex,
one evident example being the introduction of cashless payment systems such as 
Auckland Transport's HOP cards \citep{cn}.

Another technology that is widely used in public transport vehicles is positioning devices,
referred to in the literature as automatic vehicle location (AVL) systems.
Once such system is the global positioning system (GPS),
which is used by many transit providers, including Auckland Transport.

\textbf{The main purpose:}
While most of the \gls{avl} systems were implemented for operational purposes,
many studies have investigated methods of using this \gls{rti} to
predict travel time of buses, and hence arrival time at future stops.
The goal of these studies was to make accurate predictions about the \gls{eta}
of a bus for passengers waiting at a bus stop.
The \gls{avl} system and associated prediction algorithms are refered to as \glspl{atis}.
Consequently, studies have shown that when a countdown is displayed, percieved waiting times are less 
than actual wait times \citep{cn}.
However, if predictions are not accurate, it can have the opposite effect.


In Auckland, there are two main cases where inaccuracy can cause frustration for passengers:
the first is when uncertainty is large, and ETAs can increase suddenly, 
while the second occurs when a bus that is not running for whatever reason is still displayed 
on the board, so commuters are left waiting for a bus that isn't coming.
The first of these is an issue we will be targeting, while the second may only be something we can allow for.


\textbf{Work that has been done:}
Previous studies have used a range of different modeling and prediction techniques to obtain ETAs.
These ranged from fairly simple real-time only Kalman Filter models \citep{cn}, 
to data-driven models such as 
$k$-nearest neighbour (KNN) \citep{cn}, 
artificial neural networks (ANNs) \citep{cn}, 
and support vector machines (SVMs) \citep{cn}.
Recently, several particle filter models have been used in various ways to solve transit problems,
such as \cite{hans-etal:2015} who used a particle filter to model the bunching behaviour of buses
in the hopes of coming up with better management techniques.



\textbf{What we hope to achieve:}
There are several areas we hope to target in our research.
The first of these is to improve predictions by using more of the available data,
including travel times of other buses traveling along the same road ways, 
not necessarily the same route.
The second is to investigate predictions intervals as a way of communicating uncertainty to commuters.
Finally, we hope to create a user interface (UI) that allows commuters to (i) find out the ETA of their bus,
and (ii) a journey planning application that lets commuters choose the best (fastest) journey to their destination.

To do all this, we are going to focus on implementing a particle filter to model the dynamic motion of buses,
and use this in conjunction with historical data and the travel times of other buses to estimate ETA.



% ----------------------------------------------------------------------
\section{Background}
\label{sec:background}


% Background knowledge is crucial, therefore describe it fully here.
% Specify the background to the problems you are trying to solve.
% Define anything technical that most statisticians will not be
% familiar with.

% What previous work has been done in the area?
% Cite references relating to such work, e.g.,
% in the form of \cite{reid:2003} and \cite{efro:tibs:1993}.
% Has anybody described any open problems in the literature?

% Make sure that problems arising from the background knowledge
% are clearly described. There should be a logical flow of thought
% in this section starting from the background and leading to the
% problem on hand.

% Don't put anything new in this section.


Since as early as the 1960's, public transit agencies have been deploying \gls{avl} systems
in their fleets \citep{tcrp:1997}.
The purposes of these systems range from operational, such as planning and maintenance, 
to \glspl{atis}, most notably \gls{rti} and journey planning \citep{tcrp:2003}.
Most of the early \gls{avl} implementations used a signpost system,
in which signposts fitted with transmitters would be positioned along a route
and communicate with passing buses.

More recently, the \gls{gps} has become incresingly popular as an \gls{avl} technology,
and is implemented in the Auckland Transport fleet
and many other fleets around the world.
For this reason, our work will focus solely on \gls{gps}-based systems.


In a \gls{gps}-based \gls{avl} system, vehicles report their position to a central server.
The frequency of these reports depends on the system being used.
In some, the \gls{gps} reports are triggered by proximity to a bus stop,
while in others there is a relatively fixed interval---for example, 30~seconds---allowing
for communication delays and signal interference.
If the agency has made it available, 
these locations can then be accessed through public \glspl{api}
\citep{tcrp:2003}.
The particular family of \gls{api} we will be working with is \gls{gtfs}
(see section~\ref{sec:data}),
which is a global, standardised format for providing transit data to developers
\citep{gtfs}.


Once a fleet has been fitted with an \gls{avl} system, 
it can be used for a variety of purposes, most notably arrival time prediction.
The simplest prediction techniques use a combination of previous arrival and travel times,
such as those implemented by \cite{cn}.
The arrival time of the current bus at its last stop is recorded, 
and then travel time between the last stop and the next one, 
provided by previous buses or schedule information,
is added to it to predict the arrival time at the next stop.
This method requires arrival times, so in \gls{avl} systems that to not record
these when a bus arrives, they must be estimated.


\cite{dailey:2001} implemented an algorithm in Seattle, Washington,
in which a \gls{kf} (see \cref{sec:kalman_filter}) 
approach was used to predict arrival time in a situation where
actual arrival time was unavailable,
using a signpost and odometer \gls{avl} system to record the distance travelled along a route.
\cite{cathey-dailey:2003} produced a general prescription for arrival time prediction using
a \gls{gps}-based system.
Their algorithm consisted of three parts:
the first involved the ``tracker'', in which GPS location was converted to distance into trip
based on static schedule information;
the second involved estimating the \emph{true state} of the vehicle (distance into trip, speed, 
and acceleration) using a \gls{kf};
and the third presented some alternative arrival time prediction methods and example implementations.


As most of the simple arrival time prediction methods were only accurate for
a few stops ahead \citep{cn},
many other prediction algorithms were proposed, compared, and implemented
to varying degrees over the next decade.
These included data-driven models such as \gls{knn} regression,
\gls{ann}, and \gls{svm} 
\citep{chang-etal:2010,jeong-rilett:2005,yu-etal:2006,yu-etal:2010,yu-etal:2011}.
In these, historical data was collected over a period of time,
and then used in combination with
real-time \gls{avl} data to generate arrival time predictions.
These methods, in particular \gls{ann} (OR \gls{svm}??),
were shown to give reasonably accurate predictions for many stops ahead 
\citep{cn}.


A more recent approach to modeling the state of transit vehicles is the \gls{pf},
which has been shown in several transportation studies to outperform the \gls{kf}
\citep{chen-rakha:2014,cn}.
\cite{chen-rakha:2014} used a \gls{pf} to predict travel times 
by proposing particle trajectories from a historical database,
while \cite{hans-etal:2015} used a particle filter in an operations research setting,
in which their goal was to propose control strategies to reduce the ``bunching''
of consecutive buses along a common route.
Additionally, they had actual arrival times available, as well as traffic light data,
so their models aren't applicable in a general setting.
As far as we know, the particle filter has not yet been used as a predictive model for arrival times
in a general GPS-based system in which actual arrival times are unknown.




\subsection{Recursive Bayesian Filters}
\label{sec:recursive}


Of the many approaches to modeling real-time bus positions discussed above,
our work focuses on recursive Bayesian filters, in particular the \gls{pf}.
Recursive Bayesian filters are a class of model which can be used for bus prediction 
as they are specially suited to data that is observed and analysed in real-time.
In our case, the observations are of bus locations,
which are to be used to make future arrival time predictions in real-time.


The general framework of recursive Bayesian filters consists of an
underlying Markov process with true state $\bX_k$, which is unknown and unmeasurable.
The current state $k$ is dependent only on the previous state, $k-1$:
\begin{equation}
  \label{eq:markov_state}
  p(X_k | X_0, X_1, \ldots, X_{k-1}) = p(X_k | X_{k-1}).
\end{equation}
However, there is also a \emph{hidden Markov process}
with state $\bY_k$ that is dependent on $\bX_k$, 
for which we can make observations.
In our case, the \emph{true state} is the distance into trip, $d_k$, 
and speed, $v_k$, of the bus,
$\bX_k = [d_k\ v_k]^T$, which we cannot observe.
Instead, the bus reports its GPS position
(latitude, $\phi$, and longitude, $\lambda$) at regular intervals,
so the observation state is $\bY_k = [\phi_k\ \lambda_k]^T$.


There are many different recursive Bayesian filters,
but the two we will discuss are the \gls{kf} (\cref{sec:kalman_filter}),
which has been used in many arrival time prediction applications,
including those by \cite{cn},
and the \gls{pf} (\cref{sec:particle_filter}), 
which is a highly generalised form and has recently
shown up in several transit applications \citep{cn}.



\subsubsection{Kalman Filter}
\label{sec:kalman_filter}

The \gls{kf} has been predominant in 
many real-time applications which, apart from its use in transit described here,
has also had applications in navigational systems, including military
missiles and the International Space Station \citep{cn}.
In many applications, the \gls{kf} model is based on linear physics equations,
such as Newton's Laws of Motion, to predict future position
given current position, speed, and acceleration \citep{cn}.
They typically include multiple sources of input, 
including accelerometers and gyroscopes, to improve accuracy.


The \gls{kf} works in two steps.
First, the new state is \emph{predicted} from the previous one,
and then the state is \emph{updated} using the observations.
Each state is associated with a mean vector (the state) and associated covariance matrix.
In this way, the state is assumed to have a multivariate normal distribution.


In the first step, the prediction model assumes a linear state transition specified by
a matrix $\mat{A}$, with Gaussian process noise $\mat{w}_k$.
That is, 
\begin{equation}
  \label{eq:kf_statetransition}
  \bX_k = \mat{A}\bX_{k-1} + \mat{w}_k.
\end{equation}
The relationship between the unknown state and the hidden Markov state is described
by a measurement matrix $\mat{H}$, along with the measurement error $\mat{v}_k$,
\begin{equation}
  \label{eq:kf_measurement}
  \bY_k = \mat{H}\bX_{k-1} + \mat{v}_k.
\end{equation}
The limitation here is that the relationship between $\bX$ and $\bY$ needs to be a linear
combination of the state parameters that can be expressed in a matrix.


In the \gls{kf} implementation mentioned earlier,
\cite{cathey-dailey:2003} were required to first estimate the 
distance into the trip in their ``first step'' to make intermediate ``observations''
$\bZ_k = \mat{H}\bX_{k-1} + \mat{v}_k$, where $\mat{H} = [1\ 0]$.
These approximate observations were then used to update the state.
Along with the assumption of Gaussian errors,
this makes the \gls{kf} somewhat restrictive,
and not ideal for modeling processes which do not obide strictly to linear dynamic equations
(see \cref{sec:busbehavior}).



\subsubsection{Particle Filter}
\label{sec:particle_filter}

In response to the restrictive nature of the \gls{kf}, there have been many 
alternatives described, such as the Extended Kalman Filter \citep{cn},
but we will focus on the \gls{pf}.
This generalised filter allows the use of \emph{unrestricted functions} to define
state transitions and measurements, rather than be limited by matrices,
and makes no unnecessary assumptions about the distributions involved.


Instead of modeling the state distribution entirely, 
the \gls{pf} uses a sample of $M$ independent state estimates called \emph{particles}, 
which can each be modeled individually, and then resampled (with replacement) 
using the likelihood of each particle to generate sampling weights.
In our case, we assume a bus has an unknown state $\bX_k = [d_k\ v_k]^T$,
so each individual particle is denoted $\bX_k^{(i)} = [d_k^{(i)}\ v_k^{(i)}]^T$,
$i = 1, \ldots, M$.


\begin{figure}[b]
  \centering
  \includegraphics[width=0.45\textwidth]{gps-dist2.jpg}
  \includegraphics[width=0.45\textwidth]{gps-dist1.jpg}
  \caption{Relationship between a particle's distance into trip (right) and associated GPS coordinates
  (left). The single value of distance can be mapped to a GPS coordinate,
  which can in turn be compared to the observed position.}
  \label{fig:gps-dist}
\end{figure}


When a new observation is recieved,
we can model each particle individually and independently using the state transition function, $f$,
applied to the particle's current state,
as well as any other information we have available (see \cref{sec:busbehavior}) and process noise,
\begin{equation}
  \label{eq:pf_statetransition}
  \bX_k^{(i)} = f(\bX_{k-1}^{(i)}, \ldots, \mat{w}_k^{(i)}).
\end{equation}
Since each particle has its own value of $d_k$, 
we can use the shape information supplied by \gls{gtfs} to
find the coordinates of that particle (see \cref{fig:gps-dist}).




Now, instead of generating pseudo-observations of distance
as required by a \gls{kf} approach, we are mapping the unknown state into 
a space we can compare directly to the observations (i.e., \gls{gps} coordinates):
\begin{equation}
  \label{eq:pf_measurement}
  \bZ_k^{(i)} = h(\bX_k^{(i)}).
\end{equation}
The distance between two GPS coordinates can then be used to generate weights for each particle.
The weight of the $i^{\mathrm{th}}$ particle is given by
\begin{equation}
  \label{eq:pf_likelihood}
  w_i = \frac{p(\bZ_k^{(i)} | \bY_k)}{\sum_{j=1}^M p(\bZ_k^{(j)} | \bY_k)}
\end{equation}
Note that the likelihood uses the distance between the points.
These weights are used to resample with replacement and generate a posterior distribution 
of particles approximating the new state.


The main advantage of the \gls{pf} is that we make no unnecessary 
assumptions about the error distributions, 
and are no longer restricted to linear transitions between states 
(instead only by computational complexity).
One of the unique features of modeling bus movement
is \emph{dwell times}, which are discussed in \cref{sec:busbehavior}.
Multimodality is also common around bus stops, particularly in the proposal distributions, 
which can be problematic for a \gls{kf} 
which assumes unimodal distributions for all parameters.


Another advantage of the \gls{pf} is that it extends easily to the problem of arrival time prediction.
At any time $k$, we have a posterior distribution for the current state,
where each particle has its own value for distance and velocity. 
These particles can be projected forward to obtain a sample of arrival times
based on a predictive model applied to each particle,
rather than an entire state estimate.
The predictive distribution makes no assumptions other than those in the model
used to obtain it.









\subsection{Modeling Bus Behavior}
\label{sec:busbehavior}


One unique feature of modeling bus behaviour is that 
they can stop and wait at bus stops along the route
while passengers get on and off.
The time spent waiting at a stop is known as \emph{dwell time},
and has been shown to be necessary in accurately modeling bus behavior \citep{cn}.
[Algorithms such as the KF cannot easily incorporate dwell times,
as they need to occur with some probability (the bus doesn't \emph{have} to stop),
which can result in multimodal distributions.]\footnote{rewrite}
The PF, however, has no such difficulty,
and \cite{hans-etal:2015} describe how they applied a PF to buses.


When approaching a bus stop,
each particle can independently decide whether or not it will stop,
and depending on the outcome follow the relevant trajectory.
Those particles that do stop will each be given (independently)
a dwell time, after which period they continue along the route.
Inevitably, when passing a stop, the prior distribution of the particles will be multimodal:
those that stopped, and those that didn't.
% In their work, \cite{hans-etal:2015} also had data relating the traffic light locations and
% timings, so they were able to do a similar model in that regard.
% However, Auckland Transport currently has no such data publicy accessible,
% so we are unable to implement their models.

\begin{figure}[bt]
  \centering
  \includegraphics[width=0.6\textwidth]{particle-stop.pdf}
  \caption{Multimodal proposal distribution of particles when passing a stop.}
  \label{fig:particle-stop}
\end{figure}

Other features somewhat unique to bus tracking, 
in contrast to other tracking algorithms,
is that they follow known paths, at known times of the day \citep{cathey-dailey:2003}.
We have departure times, stop locations, 
and various other details which we can---and should---make use of 
when formulating our models.


One example where route information is used is when multiple buses travel the same 
route at various times of the day (known as trips).
Several implementations \citep{yu-etal:2011,hans-etal:2015},
have used this in their modeling.
There doesn't seem to have been any work done in taking this one step further:
to use information obtained from other buses traveling along \emph{different routes},
but which happen to travel along the \emph{same roads}.
In some areas, this information can be expected to be available in high frequency,
such as along main roads into and out of the city,
so it could be important for accurate prediction.



\subsection{Predicting Arrival Time}
\label{sec:arrivaltimeprediction}

So far, we have only discussed modeling the current state of a vehicle in real-time.
The next part involves applying the state to predict arrival times at future stops along the route.
Arrival time prediction has been evolving since some of the first \gls{avl}
systems were installed in bus fleets.
Prediction methods range from simple carry-on delay \citep{cn},
to more complicated prediction functions involving historical data,
dwell time distributions, 
and headway (the time between the last bus to travel the route and the current one)
on routes with multiple buses 
\citep{cn}.


The simple schedule-deviation models used by \cite{dailey:2001} involve
recording or estimating the arrival time of buses in real-time,
and then using the deviation from the schedule to predict \gls{eta}
at future stops.
Several studies, however, found that this was typically only reliable for only a few stops ahead
\citep{cn}.


\cite{cathey-dailey:2003} used some more complex predictive models, 
which were capable of incoroporating historical travel time
data to predict future travel and therefore arrival times.

There has also been a lot of work on models that rely almost entirely on historical 
data to make predictions.
Perhaps the simplest of these is \gls{knn} regression,
in which the current trip's arrival time is predicted using the closest
matching trip in a historical database \citep{cn}.
More advanced models include \gls{ann} and \gls{svm},
which are computer learning algoriths that use historical data to
learn patterns which can then be used to make predictions.

One predictor used by \cite{cn} was the trajectory of previous buses,
and using the ``headway'' (how far behind one bus is from another)
of the previous bus to predict the next.
This is only applicable on routes that have multiple trips per day,
and typically require a high-frequency route.


More recently, \cite{hans-etal:2015} used a \gls{pf} to predict arrival.
Other PF models that use historical data as particle trajectories
\citep{chen-rakha:2014}.


Doesn't look like there have been any uses of big-data models that use
historical data of \emph{all} buses traveling along a road
(not just those of the same route) as well as the same real-time data,
and then making predictions using all of this.












% ----------------------------------------------------------------------
\section{So What's New?}
\label{sec:whatsnew}



% List \textit{specific} and \textit{new} results that your thesis
% plans to obtain, especially with regard to new statistical theory
% and methodology.
% It is essential that you have provided comprehensive background
% (in Section~\ref{sec:background})
% so that it is clear what new contributions will be made (here),
% and how they will extend what is currently known.
% Tie these with Appendix~A(i), and a list such as below is a
% good idea.


% For example, all of the points below are new (to my knowledge)
% and have not been done yet.
% \begin{enumerate}

% \item
% Develop a new method for quantile regression based on the
% asymmetric Laplace distribution and the concept of link functions
% and parallelism assumptions (via constraint matrices).


% \item
% Derive the asymptotic properties of the above method,
% both as $n \rightarrow \infty$ and as $p \rightarrow \infty$.




% \item
% Conduct a small simulation to check the mean squared error and
% other properties. To be done in R with some sections written in~C
% calling LINPACK \citep{dong:bunc:mole:stew:1979} for additional speed.



% \item
% Compare my results to those of~\cite{wei:carr:2009}, especially
% relating to boundary effects and small-sample properties.



% \item
% Tackle an important dataset or problem that no one has
% satisfactorily resolved before. It is essential that new
% methodologies are investigated and that novel insights are
% obtained. Note that a conventional analysis, even of a very large
% dataset, is \textit{not} PhD-level research.


% \end{enumerate}



This work will focus on three main parts:
real-time bus modeling using a particle filter,
arrival time prediction using a combination of the particle filter,
historical data, and ``real-time'' travel time information
from other buses,
and finally methods of communicating this information to commuters,
including prediction intervals
to display uncertainty


\subsection{Particle Filtering}
\label{sec:new-pf}

Unlike several other studies, including those by \cite{hans-etal:2015},
we will be working with only GTFS (realtime) data provided by Auckland Transport.
One big difference between this data and many others is that we do not have
actual arrival times available.
For example, in the models used by \cite{hans-etal:2015},
actual arrival times were recorded by the \gls{avl} system, 
so they were able to use these to good effect in their predictions.


To estimate arrival times, we will use the distribution provided by the \gls{pf}.
Each particle's arrival time can be computed, so for each stop we can obtain 
a posterior distribution of arrival times.
In most cases, this should be fairly narrow;
however, there will be situations where the bus could be traveling slow and arrive
late and have a short (or non-existent) dwell time,
or the bus could be traveling fast, arrive earlier,
and have a long dwell time.
This paragraph sucks.


There are several situations we hope our \gls{pf} will be able to improve on.
The first is dwell times, which we mentioned and was shown by 
\cite{hans-etal:2015} to be necessary in models, and easily implemented
using a \gls{kf}.
Another is reliability at loops.
Several routes in the \gls{at} network have \emph{loops},
in which, given a \gls{gps} coordinate, the bus could either be
at the beginning (heading into) the loop, or at the end of (heading out of) a loop.
In a \gls{kf} approach, we would need to make a best guess as to which situation 
the bus is in; 
in a \gls{pf}, however, we can just allow some of the particles to be in one state
and the rest in the other.
In fact, no extra conditions or logic is required in the \gls{pf}.





\subsection{Prediction}
\label{sec:new-prediction}


Predicting bus arrival is the main goal of this work.
As we will already have a posterior distribution for the current state of
each bus, 
we will be able to use this---along with any other information we
have available---to predict arrival time.


We will be comparing various methods of prediction:
simple state prediction (that is, using only the current state of the 
bus to predict arrival time),
historical based prediction,
real-time traffic conditions obtained from other buses,
and combinations of these.
In each of these, we will allow for stopping (with probability) at stops
along the way, and the associated dwell times.




\subsection{Commuter Information}
\label{sec:commuter-info}


The end goal of our work will be a free web application available to
commuters, allowing them to check the status of their bus,
and get information regarding the estimated time of arrival.
We will investigate point estimates, as well as interval estimates to do this.


Additionally, providing ETA to destination will also be useful,
and this will pave the way for journey planning.
This is where users can enter a start and end location,
and be shown various routes they can take,
with estimates of travel time and arrival time,
allowing them to make informed decisions as to which route will get them
to their destination on time, and/or as fast as possible.









% ----------------------------------------------------------------------
\section{Data and Special Needs}
\label{sec:data}


% Almost all Statistics PhD theses should analyse at least one
% data set, even if it is a toy data set.


% State their source fully.
% If new data is important to the thesis describe what's new.
% Why is this data set important?
% What is novel about it?
% Specify any ethics or confidentiality issues.


% A plot of some of the data may be useful;
% see Figure~\ref{fig:myfig}.


% Do you have any special needs such as IT needs?
% These include hardware (supercomputing facilities),
% and expertise/technical knowledge.
% Often extra large data sets have special needs associated
% with its processing.
% How do you invisage those needs to be met?



% Funding: anything to report here?
% If your thesis work involves experiments, travel or special
% resources in order to collect data, or essential collaboration with
% experts in your field, then you should describe these requirements
% here along with how you, or your supervisor, will fund these
% requirements. Departments work on tightly planned budgets and
% generally do not have the facilities to pay for unplanned PhD
% related expenses.



% If ethics approval(s)/permissions is needed then put
% any details here.





% \begin{figure}[tt]
% \begin{center}
% %\includegraphics[height=70mm]{./myfig.pdf}
% \caption{
% Data for a two-class classification problem.
% The red ``+'' is for class~1, and $n = 250$.
% The blue ``o'' is for class~2, and $n = 500$.
% }
% \label{fig:myfig}
% \end{center}
% \end{figure}




Throughout our work, we will be working will publicly available (via API keys) \gls{gtfs}
(-realtime) data.
The specification itself is maintained by Google, 
while the feed we will be using is provided by Auckland Transport.
\gls{gtfs} consists of two parts:
the static data, which contains information about schedules, trips, stop locations,
and route shapes, as well as a real-time feed, which gives the most recent locations
of all buses in the Auckland Transport fleet (over 1000 at peak times).


Additionally, we will need to store our own historical records of travel times and other
variables for use in our prediction models. 
This will likely be in a database, although the exact details of this are yet unknown.


Due to the computer intensive nature of our work, 
when we come to deploying a full-scale implementation,
we will require a dedicated server that can request vehicle positions,
run the \gls{pf} algorithm,
and update the predicted arrival times of all buses at future stops.
We will also require a websever to make these predictiosn available to the public.





% ----------------------------------------------------------------------
\section{Goals}

% List \textit{specific} goals you wish to achieve in your PhD.


% \begin{enumerate}

% \item
% I wish to derive the first three moments of the Slash distribution.
% This will involve working out the characteristic function first.


% \begin{itemize}

% \item[a.]
% Then work out the observed information matrix
% based on~\cite{bick:etal:2009}.

% \item[b.]
% Then work out the expected information matrix
% \citep{scot:lee:wild:2007}.

% \item[c.]
% Apply the EM algorithm \citep{demp:lair:rubi:1977} to estimate~$\lambda$.

% \item[d.]
% Write a R package to implement my method.
% It will be written in S4 and use object oriented methods
% \citep{cham:1998}.

% \item[e.]
% Apply the method to the radiation data set
% \citep{MR2526777}.

% \item[f.]
% Extend biplots \citep{gowe:1966} for my data.

% \item[g.]
% Release the package on CRAN
% (cf.~\cite{murr:ihak:2000}).

% \item[h.]
% Publish my results in at least two papers,
% earmarked for JASA and JRSS-B.
% Also an applications paper in Biometrics.
% See Section~\ref{sec:timeline}.

% \end{itemize}



% \item
% Solve the Fisher-Behrens problem
% \citep{efro:2009,MR2415600,MR2508377}.


% \end{enumerate}


\begin{enumerate}
\item 
  Implement a Particle Filter on a data set and make predictions that are on par with those currently available.

\item 
  Investigate ways of using other live and historical data to improve the accuracy of estimates.

\item 
  Look at different summary statistics for better point-estimates, and look into providing useful prediction intervals.

\item 
  Implement a large-scale version of the model for a (subset of) the AT PTS, and see how well it runs.

\item 
  Create a web/phone app to access the predictions.

\item
  Package the system so that it is distributable to other feeds to remove its dependency on us.
\end{enumerate}






% ----------------------------------------------------------------------
\section{Timeline and Activities}
\label{sec:timeline}


% \begin{table}[hh]
% \caption{
% Timeline of my privisional year.
% }
% \centering
% \ ~~~~ \\
% \label{tab:timeline}
% \begin{tabular}{|c|l|}
% \hline
% Date & Activity \\
% \hline
% 2010-04-01 & Provisional PhD registration (PhD in Statistics). \\
% 2010-05-01 & Updated my personal webpage at
%              \textsf{www.stat.auckland.ac.nz/$\sim$myStudentName}. \\
% 2010-05-20 & Attended one of the
%              Doctoral Skills Programme's Induction Days. \\
% 2010-09-01 & Gave my first talk at NZSA conference. Won first prize. \\
% 2010-11-01 & Gave a talk to PhD Talks Day. \\
% 2011-01-15 & Submit my first paper to \textit{Annals of Statistics}
%              (co-authored with supervisor). \\
% 2011-05-01 & Presented my research progress to a departmental seminar. \\
% 2012-01-20 & Achieve Goal~1. \\
% 2012-08-20 & Achieve Goal~2. \\
% 2012-10-23 & Submit my second paper to \textit{Annals of Applied Statistics}
%              (co-authored with supervisor). \\
% 2013-01-15 & Submit my third paper to \textit{Biometrics}
%              (sole authorship). \\
% 2013-02-01 & Submit my PhD thesis. \\
% \hline
% \end{tabular}
% \end{table}



I have fulfulled all my first year requirements.
These are:
\begin{enumerate}

\item
All EoI provisional goals:
\begin{enumerate}

\item
\textit{Approval of the full thesis proposal by the appropriate departmental/faculty postgraduate
committee}:
Here it is!

\item
\textit{A substantial piece of written work, such as a literature review, completed to the
satisfaction of the main supervisor}: Here?


\item
\textit{Presentation of the proposal and/or work in progress to an appropriate forum e.g.\ seminar,
research group, conference, to the satisfaction of the supervisors}:
YYYY-MM-DD.

\item
\textit{Attendance at one of the Doctoral Skills Programme
Induction Days}:
2015-11-04

\item
\textit{Successful completion of the Academic Integrity Module}:
dd/mm/2014

\item
\textit{Undertake Diagnostic English Language Needs Assessment (DELNA) online screening}:
25/02/2010

\item
\textit{Complete STATS 710 and STATS 769 at B+ or higher grade within the first 
12~months\footnote{STATS 769 taught second semester, unable to complete within 12~months}
of registration}

\item
\textit{Attendance of at least 10~Statistics departmental research seminars per annum, 
with forms fully filled in and handed in}:
see Table~\ref{tab:seminars}

\item
\textit{Maintenance of a personal departmental webpage providing information on scholarly
activities and objectives to the satisfication of the supervisor and Department of Statistics
PhD Officer}:
\url{https://www.stat.auckland.ac.nz/people/tell029}

\item
\textit{Satisfactory participation in the Department of Statistics PhD Talks Day and/or give
a departmental seminar within the first 12~months of registration}:
(c)


\end{enumerate}





% \item
% I have updated my webpage
% (\textsf{www.stat.auckland.ac.nz/$\sim$myStudentName})
% giving details of my thesis, links to other research resources
% in my topic, and some personal stuff to make it interesting.


% \item
% I have diligently attend as many Statistics Department seminars
% as I could. They are given in Table~\ref{tab:seminars}.
% This is much more than the minimum quota set by the department.
% Consequently there should be no problem due to this when getting
% my annual report signed off\footnote{If insufficient seminars have
% been attended then sign off will occur \textit{after} the minimum number
% is reached.}.
% The 2010-04-08 seminar was particularly useful because it gave
% me an idea on how to solve one of my problems.


% \item
% I did STATS~730 in Semester~1 of 2010 and obtained an A+.


% \item
% I did STATS~782 in Semester~2 of 2010 and obtained an A.



\end{enumerate}











\begin{table}[hh]
\caption{
Departmental seminars I have attended.% (top part of the table).
%Talks from another UoA departments are in the middle tier.
%Conferences and workshops are in the bottom tier.
}
\centering
\ ~~~~ \\
\label{tab:seminars}
\begin{tabular}{cll}
\toprule
Date & Speaker & Title \\
\midrule
2015-09-02 & Moshe Haviv &
Queues \& Cooperative Games \\
%
2015-11-18 & Hadley Wickham &
Pure, predictable, pipeable: creating fluid interfaces with R \\
%
2016-01-16 & Xudong Huang &
Composite likelihood estimators, mixed models \& complex \\
&&sampling \\
%
2016-01-27 & Kevin Knuth &
Modern Probability Theory \\
%
2016-01-28 & Maartje an de Vrugt &
Online appointment scheduling: a taxonomy and review \\
%
2016-02-24 & Arndl von Haeseler &
Terraces, partial terraces, and phylogenetic inference \\
%
2016-03-31 & Shengwei Hu &
Classification on high-dimensional data using\\&&nonparametric mixtures \\
%
2016-04-14 & June Lau &
Optimizing the cardiac patient's journey: using mathematical \\
&&modelling to guide patient flow, staffing, scheduling and \\
&&resource allocation through the cardiac unit \\
%
2016-06-01 & Arman Bilge &
Hamiltonian Monte Carlo on the Space of Phylogenies \\
%
% \midrule
% 2010-06-16 & James B.~Conant &
% ``Geography is not a university subject'' (geo Department) \\
% %
% yyyy-mm-dd & Speaker Name &
% Title of Talk \\
% \midrule
% 2010-05-29 & David Siegmund &
% Workshop on `Genetic Mapping' at UoA. \\
%
\bottomrule
\end{tabular}
\end{table}




% ----------------------------------------------------------------------
\section{Summary}



% Give a few sentence summary of your thesis, especially
% what's new.



We're gunna make people happy.











% ----------------------------------------------------------------------
\section*{Appendix~A}

% Delete or replace the contents of this section with any
% appendices you may have.

% \bigskip

% \bigskip

% The \textit{University of Auckland Statute and Guidelines for the
% Degree of Doctor of Philosophy (PhD)} (2008)
% reads\footnote{Clause~1, Preamble, item~(d).}:

% \bigskip


% \noindent
% ``The PhD degree is awarded for a formal and systematic
% exposition of a coherent programme of advanced research
% work carried out over the period of registration for the
% degree which in the opinion of the examiners and the Board
% of Graduate Studies satisfies all of the following criteria:

% \begin{itemize}

% \item[(i)] to be an original contribution to knowledge or
% understanding in its field, and

% \item[(ii)] to meet internationally recognised standards
% for such work, and

% \item[(iii)] to demonstrate a knowledge of the literature
% relevant to the subject and the field or fields to which
% the subject belongs, and the ability to exercise critical
% and analytical judgement of it, and

% \item[(iv)] to be satisfactory in its methodology, in the
% quality and coherence of its written expression, and in
% its scholarly presentation and format.''

% \end{itemize}





\addcontentsline{toc}{section}{References}
\bibliographystyle{./elsart-harv} % elsart-harv,plain,unsrt,alpha
\bibliography{./myrefs}


\end{document}


